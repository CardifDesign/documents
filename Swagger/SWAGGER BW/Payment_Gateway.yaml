openapi: 3.0.1
info:
  title: COL_PaymentGateway  - Tibco service
  description: '<hr/> Payment Gateway - Tibco service <br/> For ESB-Tibco systems
    <br/> Low Risk test. <br/>Used Packages: <br/>Schema = xx, PackageDataBase = xx,
    NameOperation = xxx <hr/> Controles de cambio. <br/> 16/09/2020 - Creación. 08/10/2020
    - Se habilita el metodo /payu/token <br/> 15/10/2020 - Se incluye el metodo /payu/refund
    para las devoluciones 27/10/2020 - Se ajusta metodo /payu/tokenization-payment,
    se agrega tags Partner y Event. '
  license:
    name: BNP Paribas Cardif Colombia - Seguros Generales S.A
    url: https://bnpparibascardif.com.co/
  version: 1.0.4
servers:
- url: https://vip-busintco-test.co.xcd.net.intra:20310/payment-gateway/v1
tags:
- name: Default
- name: Payment PayU
paths:
  /payu/ping-payments:
    get:
      tags:
      - Default
      summary: Server heartbeat operation
      description: This operation shows how to override the global security defined
        above, as we want to open it up for all users.
      responses:
        200:
          description: OK
          content: {}
        400:
          description: Invalid Request.
          content: {}
  /payu/tokenization-payment:
    post:
      tags:
      - Payment PayU
      summary: Perform tokenization and payment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/paymentGateway'
        required: false
      responses:
        default:
          description: ('200','Success'); (También sirve para un update) ('201','Created
            Success');  ('204','No Content');(Este aplica cuando llegas a la BD y
            no obtienes información) ('400','Technical Error'); ('404','Not Found');(método
            no encontrado) ('408','ConnectionTimeout'); ('422','Unprocessable Entity');(Error
            por null DB) ('430','Database Exception');(Cualquier otro error en DB).
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/paymentGatewayResponse'
      x-codegen-request-body-name: direct-token
  /payu/payment:
    post:
      tags:
      - Payment PayU
      summary: Perform payment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/paymentGateway'
        required: false
      responses:
        default:
          description: ('200','Success'); (También sirve para un update) ('201','Created
            Success');  ('204','No Content');(Este aplica cuando llegas a la BD y
            no obtienes información) ('400','Technical Error'); ('404','Not Found');(método
            no encontrado) ('408','ConnectionTimeout'); ('422','Unprocessable Entity');(Error
            por null DB) ('430','Database Exception');(Cualquier otro error en DB).
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/paymentGatewayResponse'
      deprecated: true
      x-codegen-request-body-name: direct
  /payu/tokenization:
    post:
      tags:
      - Payment PayU
      summary: Perform tokenization
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/paymentGateway'
        required: false
      responses:
        default:
          description: ('200','Success'); (También sirve para un update) ('201','Created
            Success');  ('204','No Content');(Este aplica cuando llegas a la BD y
            no obtienes información) ('400','Technical Error'); ('404','Not Found');(método
            no encontrado) ('408','ConnectionTimeout'); ('422','Unprocessable Entity');(Error
            por null DB) ('430','Database Exception');(Cualquier otro error en DB).
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/paymentGatewayResponse'
      deprecated: true
      x-codegen-request-body-name: emissionRequestData
  /payu/token:
    post:
      tags:
      - Payment PayU
      summary: Perform token payment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/paymentGatewayToken'
        required: false
      responses:
        default:
          description: ('200','Success'); (También sirve para un update) ('201','Created
            Success');  ('204','No Content');(Este aplica cuando llegas a la BD y
            no obtienes información) ('400','Technical Error'); ('404','Not Found');(método
            no encontrado) ('408','ConnectionTimeout'); ('422','Unprocessable Entity');(Error
            por null DB) ('430','Database Exception');(Cualquier otro error en DB).
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/paymentGatewayResponseToken'
      x-codegen-request-body-name: emissionRequestData
  /payu/refund:
    post:
      tags:
      - Payment PayU
      summary: Perform a Refund
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/paymentGatewayRefund'
        required: false
      responses:
        default:
          description: ('200','Success'); (También sirve para un update) ('201','Created
            Success');  ('204','No Content');(Este aplica cuando llegas a la BD y
            no obtienes información) ('400','Technical Error'); ('404','Not Found');(método
            no encontrado) ('408','ConnectionTimeout'); ('422','Unprocessable Entity');(Error
            por null DB) ('430','Database Exception');(Cualquier otro error en DB).
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/paymentGatewayResponse'
      x-codegen-request-body-name: emissionRequestData
components:
  schemas:
    paymentGatewayResponse:
      type: object
      properties:
        returnCode:
          type: integer
          description: Response Return Code
        mesagge:
          type: string
          description: Response Description
        bodyResponse:
          type: object
          properties:
            person:
              type: object
              properties:
                state:
                  type: string
                  description: transaction status
    paymentGateway:
      type: object
      properties:
        language:
          maxLength: 2
          type: string
          description: The language used in the petition. Using for system error messages.
            See supported languages
        command:
          maxLength: 32
          type: string
          description: Use SUBMIT_TRANSACTION.
        merchant:
          $ref: '#/components/schemas/merchant'
        transaction:
          $ref: '#/components/schemas/transactionPayment'
        test:
          type: boolean
          description: Use SUBMIT_TRANSACTION.
        partner:
          $ref: '#/components/schemas/partner'
        event:
          $ref: '#/components/schemas/event'
        person:
          $ref: '#/components/schemas/person'
    paymentGatewayToken:
      type: object
      properties:
        language:
          maxLength: 2
          type: string
          description: The language used in the petition. Using for system error messages.
            See supported languages
        command:
          maxLength: 32
          type: string
          description: Use SUBMIT_TRANSACTION.
        merchant:
          $ref: '#/components/schemas/merchant'
        transaction:
          $ref: '#/components/schemas/transactionToken'
        test:
          type: boolean
          description: Use SUBMIT_TRANSACTION.
    paymentGatewayRefund:
      type: object
      properties:
        language:
          maxLength: 2
          type: string
          description: The language used in the petition. Using for system error messages.
            See supported languages
        command:
          maxLength: 32
          type: string
          description: Use SUBMIT_TRANSACTION.
        merchant:
          $ref: '#/components/schemas/merchant'
        transaction:
          $ref: '#/components/schemas/transactionRefund'
        test:
          type: boolean
          description: Use SUBMIT_TRANSACTION.
    merchant:
      required:
      - apiKey
      - apiLogin
      type: object
      properties:
        apiKey:
          maxLength: 32
          minLength: 6
          type: string
          description: The user or login provided by PayU.
        apiLogin:
          maxLength: 32
          minLength: 12
          type: string
          description: The key or password provided by PayU.
    transactionPayment:
      type: object
      properties:
        order:
          $ref: '#/components/schemas/order'
        shippingAddress:
          $ref: '#/components/schemas/shippingAddress'
        payer:
          $ref: '#/components/schemas/payer'
        creditCard:
          $ref: '#/components/schemas/creditCard'
        extraParameters:
          $ref: '#/components/schemas/extraParameters2'
        type:
          maxLength: 32
          type: string
          description: For authorization and capture= AUTHORIZATION_AND_CAPTURE For
            authorization= AUTHORIZATION
        paymentMethod:
          maxLength: 32
          type: string
          description: The means of payment.
        paymentCountry:
          maxLength: 2
          type: string
          description: Country of payment.
        deviceSessionId:
          maxLength: 255
          type: string
          description: The identifier of the session of the device from where the
            transaction is made. You can find more information on the page
        ipAddress:
          maxLength: 39
          type: string
          description: The IP address of the device from where the transaction is
            made.
        cookie:
          maxLength: 255
          type: string
          description: The cookie stored on the device from where the transaction
            is made.
        userAgent:
          maxLength: 1024
          type: string
          description: The user agent of the browser from where the transaction is
            made.
    transactionToken:
      type: object
      properties:
        order:
          $ref: '#/components/schemas/order'
        payer:
          $ref: '#/components/schemas/payer'
        creditCardTokenId:
          type: string
          description: credit card token
        creditCard:
          $ref: '#/components/schemas/creditCardToken'
        extraParameters:
          $ref: '#/components/schemas/extraParameters'
    transactionRefund:
      type: object
      properties:
        order:
          type: object
          properties:
            Id:
              type: number
              description: Id number provided by PayU
        type:
          maxLength: 32
          type: string
          description: REFUND
        reason:
          type: string
          description: Reason for requesting the refund or cancellation of the transaction
        parentTransactionId:
          type: string
          description: Parent transaction Id.
    order:
      required:
      - accountId
      - description
      - language
      - referenceCode
      - signature
      type: object
      properties:
        accountId:
          type: number
          description: The key or password provided by PayU.
        referenceCode:
          maxLength: 255
          minLength: 1
          type: string
          description: The order reference code. Represents the identifier of the
            transaction in the merchant's system.
        description:
          maxLength: 255
          minLength: 1
          type: string
          description: The description of the order
        language:
          maxLength: 2
          type: string
          description: The language used in the emails sent by the buyer and seller.
        signature:
          maxLength: 255
          type: string
          description: TheThe signature associated with the order. To learn more visit
        notifyUrl:
          maxLength: 2048
          type: string
          description: The notification or confirmation URL of the order.
        additionalValues:
          type: object
          properties:
            TX_VALUE:
              required:
              - currency
              - value
              type: object
              properties:
                value:
                  type: number
                  description: TX_VALUE, is the total amount of the transaction. It
                    can contain two decimal digit. Eg 10000.00 or 10000. This value
                    must be sent in transaction.order.additionalValues.entry.additionalValue.value
                currency:
                  maxLength: 3
                  type: string
                  description: The ISO code of the currency associated with the amount.
            TX_TAX:
              required:
              - currency
              - value
              type: object
              properties:
                value:
                  type: number
                  description: TX_TAX, is the VAT value (Value Added Tax only valid
                    for Colombia) of the transaction, if the null VAT is sent, the
                    system will automatically apply 19. It can contain two decimal
                    digits. Ex= 19000.00.
                currency:
                  maxLength: 3
                  type: string
                  description: The ISO code of the currency associated with the amount.
            TX_TAX_RETURN_BASE:
              required:
              - currency
              - value
              type: object
              properties:
                value:
                  type: number
                  description: TX_TAX_RETURN_BASE, It is the base value on which the
                    VAT is calculated only valid for Colombia. In case it does not
                    have VAT, it must be sent in 0
                currency:
                  maxLength: 3
                  type: string
                  description: The ISO code of the currency associated with the amount.
        buyer:
          $ref: '#/components/schemas/buyer'
    buyer:
      required:
      - contactPhone
      - dniNumber
      - emailAddress
      - fullName
      type: object
      properties:
        merchantBuyerId:
          maxLength: 100
          type: string
          description: Buyer identifier in the merchant's system.
        fullName:
          maxLength: 150
          type: string
          description: Full names of the buyer.
        emailAddress:
          maxLength: 255
          type: string
          description: Buyer's email.
        contactPhone:
          maxLength: 20
          type: string
          description: Buyer's contact telephone number.
        dniNumber:
          maxLength: 20
          type: string
          description: Buyer identification number.
        shippingAddress:
          $ref: '#/components/schemas/shippingAddress'
    shippingAddress:
      type: object
      properties:
        street1:
          maxLength: 100
          type: string
          description: First line of the address.
        street2:
          maxLength: 100
          type: string
          description: Second line of the address.
        city:
          maxLength: 50
          type: string
          description: Address city.
        state:
          maxLength: 50
          type: string
          description: State.
        country:
          maxLength: 2
          type: string
          description: country.
        postalCode:
          maxLength: 20
          type: string
          description: Buyer's shipping address zip code.
        phone:
          maxLength: 20
          type: string
          description: Buyer's shipping address zip code.
    payer:
      required:
      - contactPhone
      - dniNumber
      - emailAddress
      - fullName
      type: object
      properties:
        merchantBuyerId:
          maxLength: 100
          type: string
          description: Buyer identifier in the merchant's system.
        fullName:
          maxLength: 150
          type: string
          description: Full names of the buyer.
        emailAddress:
          maxLength: 255
          type: string
          description: Buyer's email.
        contactPhone:
          maxLength: 20
          type: string
          description: Payer's contact telephone number.
        dniNumber:
          maxLength: 20
          type: string
          description: payer's document.
        shippingAddress:
          $ref: '#/components/schemas/shippingAddress'
    creditCard:
      required:
      - expirationDate
      - name
      - number
      - securityCode
      type: object
      properties:
        number:
          maxLength: 20
          minLength: 13
          type: string
          description: The credit card number.
        securityCode:
          maxLength: 4
          minLength: 1
          type: string
          description: The credit card security code (CVC2, CVV2, CID).
        expirationDate:
          maxLength: 7
          type: string
          description: The expiration date of the credit card, see in the examples
            the availability by means of payment. YYYY / MM format.
          format: YYYY/MM
        name:
          maxLength: 20
          minLength: 13
          type: string
          description: The credit card number.
    creditCardToken:
      required:
      - processWithoutCvv2
      - securityCode
      type: object
      properties:
        processWithoutCvv2:
          type: string
        securityCode:
          type: integer
    extraParameters:
      type: object
      properties:
        type:
          maxLength: 32
          type: string
          description: For authorization and capture= AUTHORIZATION_AND_CAPTURE For
            authorization= AUTHORIZATION
        paymentMethod:
          maxLength: 32
          type: string
          description: The means of payment.
        paymentCountry:
          maxLength: 2
          type: string
          description: Country of payment.
        deviceSessionId:
          maxLength: 255
          type: string
          description: The identifier of the session of the device from where the
            transaction is made. You can find more information on the page
        ipAddress:
          maxLength: 39
          type: string
          description: The IP address of the device from where the transaction is
            made.
        cookie:
          maxLength: 255
          type: string
          description: The cookie stored on the device from where the transaction
            is made.
        userAgent:
          maxLength: 1024
          type: string
          description: The user agent of the browser from where the transaction is
            made.
    extraParameters2:
      type: object
      properties:
        INSTALLMENTS_NUMBER:
          maxLength: 64
          type: string
          description: The name of the parameter. Example= "INSTALLMENTS_NUMBER",
            "RESPONSE_URL", "PSE_REFERENCE1, etc. See use of this variable in the
            examples by country.
    person:
      required:
      - documentType
      type: object
      properties:
        documentType:
          type: string
          description: Customer document Type
    partner:
      type: object
      properties:
        partnerId:
          type: string
          description: Partner Id
    event:
      required:
      - channel
      - eventType
      type: object
      properties:
        eventType:
          maxLength: 2
          type: string
          description: Event type, 01=Emission
          enum:
          - "01"
        channel:
          type: number
          description: Channel used to add or update the record. 03=Ventas Digitales.
        eventStatus:
          maxLength: 2
          type: string
          description: BG=Begin, CL=Closed, CN=Cancel, SC=Successfully completed or
            finished, PN=Pending, PR=In Process, FL=Failed .
          enum:
          - BG
        userId:
          maxLength: 30
          type: string
          description: User who registered the event.
    paymentGatewayResponseToken:
      type: object
      properties:
        returnCode:
          type: integer
          description: Response Return Code
        mesagge:
          type: string
          description: Response Description
        bodyRespponse:
          $ref: '#/components/schemas/payuResponse'
    payuResponse:
      type: object
      properties:
        code:
          type: string
          description: Codigo respuesta Pauy
        error:
          type: string
          description: error respuesta Payu
        transactionResponse:
          type: object
          properties:
            orderId:
              type: integer
              description: Numero de orden Payu
            transactionId:
              type: string
              description: Id de transaccion Payu
            state:
              type: string
              description: Estado Payu
            paymentNetworkResponseCode:
              type: string
              description: Codigo de respuesta Payu
            paymentNetworkResponseErrorMessage:
              type: string
              description: Mensaje codigo de respuesta nPayu
            trazabilityCode:
              type: string
              description: trazabilidad Payu
            authorizationCode:
              type: string
              description: codigo de autorizacion Payu
            pendingReason:
              type: string
              description: Razon pendiente Payu
            responseCode:
              type: string
              description: codigo respuesta Payu
            errorCode:
              type: string
              description: codigo de error
            responseMessage:
              type: string
              description: Mensaje de respuesta Payu
            transactionDate:
              type: string
              description: fecha Payu
            transactionTime:
              type: string
              description: Hora Payu
            operationDate:
              type: string
              description: Fecha operacion Payu
            extraParameters:
              type: string
              description: Parametros extra Payu
